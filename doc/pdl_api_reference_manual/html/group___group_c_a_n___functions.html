<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Cypress Peripheral Driver Library: Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="cypress_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cypress Peripheral Driver Library
   &#160;<span id="projectnumber">2.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="modules.html"><span>Drivers</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___group_c_a_n___functions.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Functions<div class="ingroups"><a class="el" href="group___group_c_a_n.html">Controller Area Network (CAN)</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga9794ba1b6c28deab25cffb789edbdc9a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___group_c_a_n___functions.html#ga9794ba1b6c28deab25cffb789edbdc9a">CanIrqHandler</a> (volatile FM_CAN_TypeDef *pstcCan, <a class="el" href="structstc__can__intern__data__t.html">stc_can_intern_data_t</a> *pstcCanInternData)</td></tr>
<tr class="memdesc:ga9794ba1b6c28deab25cffb789edbdc9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">CAN (Status/Error/Rx/Tx) interrupt ISR.  <a href="#ga9794ba1b6c28deab25cffb789edbdc9a">More...</a><br /></td></tr>
<tr class="separator:ga9794ba1b6c28deab25cffb789edbdc9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga72dc16106dd10c7ce0863996053b01f0"><td class="memItemLeft" align="right" valign="top">en_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___group_c_a_n___functions.html#ga72dc16106dd10c7ce0863996053b01f0">Can_Init</a> (volatile FM_CAN_TypeDef *pstcCan, const <a class="el" href="structstc__can__config__t.html">stc_can_config_t</a> *pstcConfig)</td></tr>
<tr class="memdesc:ga72dc16106dd10c7ce0863996053b01f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the CAN module.  <a href="#ga72dc16106dd10c7ce0863996053b01f0">More...</a><br /></td></tr>
<tr class="separator:ga72dc16106dd10c7ce0863996053b01f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga457758addbdb8281b0bb9af306fa6815"><td class="memItemLeft" align="right" valign="top">en_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___group_c_a_n___functions.html#ga457758addbdb8281b0bb9af306fa6815">Can_DeInit</a> (volatile FM_CAN_TypeDef *pstcCan)</td></tr>
<tr class="memdesc:ga457758addbdb8281b0bb9af306fa6815"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deinitializes the CAN module.  <a href="#ga457758addbdb8281b0bb9af306fa6815">More...</a><br /></td></tr>
<tr class="separator:ga457758addbdb8281b0bb9af306fa6815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadd7db261d564541d858756c169f5bd71"><td class="memItemLeft" align="right" valign="top">en_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___group_c_a_n___functions.html#gadd7db261d564541d858756c169f5bd71">Can_SetTransmitMsgBuffer</a> (volatile FM_CAN_TypeDef *pstcCan, uint8_t u8MsgBuf, const <a class="el" href="structstc__can__msg__id__t.html">stc_can_msg_id_t</a> *pstcMsgId, <a class="el" href="group___group_c_a_n___data_structures.html#gaf68ef6f6d854a808b777f6c8cb969063">can_tx_msg_func_ptr_t</a> pfnCallback)</td></tr>
<tr class="memdesc:gadd7db261d564541d858756c169f5bd71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures a message buffer for transmission.  <a href="#gadd7db261d564541d858756c169f5bd71">More...</a><br /></td></tr>
<tr class="separator:gadd7db261d564541d858756c169f5bd71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac2dfa65e0a9a2137f75d3ebbf257789b"><td class="memItemLeft" align="right" valign="top">en_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___group_c_a_n___functions.html#gac2dfa65e0a9a2137f75d3ebbf257789b">Can_UpdateAndTransmitMsgBuffer</a> (volatile FM_CAN_TypeDef *pstcCan, uint8_t u8MsgBuf, const <a class="el" href="structstc__can__msg__data__t.html">stc_can_msg_data_t</a> *pstcMsgData, <a class="el" href="group___group_c_a_n___types.html#ga394463884556f90fa7d01912dbedd57e">en_can_tx_mode_t</a> enTxMode)</td></tr>
<tr class="memdesc:gac2dfa65e0a9a2137f75d3ebbf257789b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the message data of a message buffer and/or start transmission.  <a href="#gac2dfa65e0a9a2137f75d3ebbf257789b">More...</a><br /></td></tr>
<tr class="separator:gac2dfa65e0a9a2137f75d3ebbf257789b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7398532897b21d25c53be9f8e4d820f4"><td class="memItemLeft" align="right" valign="top">en_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___group_c_a_n___functions.html#ga7398532897b21d25c53be9f8e4d820f4">Can_UpdateAndTransmitFifoMsgBuffer</a> (volatile FM_CAN_TypeDef *pstcCan, uint8_t u8MsgBuf, const <a class="el" href="structstc__can__msg__data__t.html">stc_can_msg_data_t</a> *pstcMsgData, <a class="el" href="group___group_c_a_n___types.html#ga394463884556f90fa7d01912dbedd57e">en_can_tx_mode_t</a> enTxMode)</td></tr>
<tr class="memdesc:ga7398532897b21d25c53be9f8e4d820f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the message data of a message buffer and/or start with EOB = 0 (Msg Buffer as FIFO) transmission.  <a href="#ga7398532897b21d25c53be9f8e4d820f4">More...</a><br /></td></tr>
<tr class="separator:ga7398532897b21d25c53be9f8e4d820f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0f98da3c105c7eaa3cf9c604850ff36c"><td class="memItemLeft" align="right" valign="top">en_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___group_c_a_n___functions.html#ga0f98da3c105c7eaa3cf9c604850ff36c">Can_SetReceiveMsgBuffer</a> (volatile FM_CAN_TypeDef *pstcCan, uint8_t u8MsgBuf, <a class="el" href="structstc__can__msg__t.html">stc_can_msg_t</a> *pstcMsgBuffer, uint32_t u32MsgIdMask, <a class="el" href="group___group_c_a_n___data_structures.html#gab7a5a581f5d63afe396a53e4fc18800e">can_rx_msg_func_ptr_t</a> pfnCallback)</td></tr>
<tr class="memdesc:ga0f98da3c105c7eaa3cf9c604850ff36c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure a message buffer for reception.  <a href="#ga0f98da3c105c7eaa3cf9c604850ff36c">More...</a><br /></td></tr>
<tr class="separator:ga0f98da3c105c7eaa3cf9c604850ff36c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga48c8e747902799e410377d4b39915d3e"><td class="memItemLeft" align="right" valign="top">en_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___group_c_a_n___functions.html#ga48c8e747902799e410377d4b39915d3e">Can_SetReceiveFifoMsgBuffer</a> (volatile FM_CAN_TypeDef *pstcCan, uint8_t u8MsgBuf, <a class="el" href="structstc__can__msg__t.html">stc_can_msg_t</a> *pstcMsgBuffer, uint32_t u32MsgIdMask, <a class="el" href="group___group_c_a_n___data_structures.html#gab7a5a581f5d63afe396a53e4fc18800e">can_rx_msg_func_ptr_t</a> pfnCallback)</td></tr>
<tr class="memdesc:ga48c8e747902799e410377d4b39915d3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure a message buffer for reception with EOB = 0 (FIFO mode).  <a href="#ga48c8e747902799e410377d4b39915d3e">More...</a><br /></td></tr>
<tr class="separator:ga48c8e747902799e410377d4b39915d3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga323d4f4f4b68a2eb1fa7adc0c49ae5ff"><td class="memItemLeft" align="right" valign="top">en_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___group_c_a_n___functions.html#ga323d4f4f4b68a2eb1fa7adc0c49ae5ff">Can_ResetMsgBuffer</a> (volatile FM_CAN_TypeDef *pstcCan, uint8_t u8MsgBuf)</td></tr>
<tr class="memdesc:ga323d4f4f4b68a2eb1fa7adc0c49ae5ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop any message buffer operation i.e.  <a href="#ga323d4f4f4b68a2eb1fa7adc0c49ae5ff">More...</a><br /></td></tr>
<tr class="separator:ga323d4f4f4b68a2eb1fa7adc0c49ae5ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga9794ba1b6c28deab25cffb789edbdc9a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CanIrqHandler </td>
          <td>(</td>
          <td class="paramtype">volatile FM_CAN_TypeDef *&#160;</td>
          <td class="paramname"><em>pstcCan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstc__can__intern__data__t.html">stc_can_intern_data_t</a> *&#160;</td>
          <td class="paramname"><em>pstcCanInternData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>CAN (Status/Error/Rx/Tx) interrupt ISR. </p>
<p>Check for any pending interrupt source and process until no more INTs are active.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pstcCan</td><td>Pointer to register area of a CAN unit. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pstcCanInternData</td><td>Pointer to internal data.</td></tr>
  </table>
  </dd>
</dl>
<p>Description of flow:</p><ul>
<li>write new data any time into user buffer</li>
<li>check bNew, if TRUE (user buffer not released yet) &gt; set bOverflow</li>
<li>set bNew</li>
<li>call callback function</li>
<li>the MSGLST flag of the HW message buffer should be OR-mirrored into bOverflow, too </li>
</ul>

</div>
</div>
<a class="anchor" id="ga72dc16106dd10c7ce0863996053b01f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">en_result_t Can_Init </td>
          <td>(</td>
          <td class="paramtype">volatile FM_CAN_TypeDef *&#160;</td>
          <td class="paramname"><em>pstcCan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structstc__can__config__t.html">stc_can_config_t</a> *&#160;</td>
          <td class="paramname"><em>pstcConfig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the CAN module. </p>
<p>This function initializes one specific CAN module with the parameters provided in the given config structure. After initialization the CAN module has Error, Status and Module-Interrupt enabled and is ready to use.</p>
<p><a class="el" href="group___group_c_a_n___functions.html#ga72dc16106dd10c7ce0863996053b01f0" title="Initializes the CAN module. ">Can_Init()</a> has to be called with the parameter pstcConfig of type <a class="el" href="structstc__can__config__t.html" title="CAN configuration. ">stc_can_config_t</a> the basic CAN settings automatic retransmission, the CAN baudrate, and the error and status change callback function can be set.</p>
<p>All values in pstcConfig have to be in valid range (see can.h for allowed ranges of dedicated parameters). The error and status change callback functions can be NULL. In this case no information of error or status changes will be reported to the API.</p>
<p>To reset and disable the CAN module the function <a class="el" href="group___group_c_a_n___functions.html#ga457758addbdb8281b0bb9af306fa6815" title="Deinitializes the CAN module. ">Can_DeInit()</a> has to be used.</p>
<p>The resulting CAN presecaler value is checked, if it is within CAN_MAX_CLK (normally 16 MHz).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pstcCan</td><td>Pointer to register area of a CAN unit. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pstcConfig</td><td>CAN configuration parameters.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Ok</td><td>CAN module has been successfully initialized. </td></tr>
    <tr><td class="paramname">ErrorInvalidParameter</td><td>If one of the following conditions are met:<ul>
<li>pstcCan == NULL</li>
<li>pstcConfig == NULL</li>
<li>pstcCanInternData == NULL (invalid or disabled CAN unit (PDL_PERIPHERAL_ENABLE_CAN))</li>
<li>pstcConfig-&gt;stcBitrate.u8TimeSegment1 out of range</li>
<li>pstcConfig-&gt;stcBitrate.u8TimeSegment2 out of range</li>
<li>pstcConfig-&gt;stcBitrate.u8SyncJumpWidth out of range</li>
<li>pstcConfig-&gt;stcBitrate.u16Prescaler out of range</li>
<li>pstcConfig-&gt;stcBitrate.enCanPrescaler wrong enumerator</li>
<li>pstcConfig-&gt;stcBitrate.enCanPrescaler CAN_MAX_CLK violated </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga457758addbdb8281b0bb9af306fa6815"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">en_result_t Can_DeInit </td>
          <td>(</td>
          <td class="paramtype">volatile FM_CAN_TypeDef *&#160;</td>
          <td class="paramname"><em>pstcCan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deinitializes the CAN module. </p>
<p>Any pending transmission or receiption will be aborted and all CAN related registers are reset to their default values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pstcCan</td><td>Pointer to register area of a CAN unit.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Ok</td><td>CAN module has been successfully deinitialized </td></tr>
    <tr><td class="paramname">ErrorInvalidParameter</td><td>If one of the following conditions are met:<ul>
<li>pstcCan == NULL</li>
<li>pstcCanInternData == NULL (invalid or disabled CAN unit (PDL_PERIPHERAL_ENABLE_CAN)) </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gadd7db261d564541d858756c169f5bd71"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">en_result_t Can_SetTransmitMsgBuffer </td>
          <td>(</td>
          <td class="paramtype">volatile FM_CAN_TypeDef *&#160;</td>
          <td class="paramname"><em>pstcCan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>u8MsgBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structstc__can__msg__id__t.html">stc_can_msg_id_t</a> *&#160;</td>
          <td class="paramname"><em>pstcMsgId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___group_c_a_n___data_structures.html#gaf68ef6f6d854a808b777f6c8cb969063">can_tx_msg_func_ptr_t</a>&#160;</td>
          <td class="paramname"><em>pfnCallback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures a message buffer for transmission. </p>
<p>Setting of new values is not possible if a transmission is pending, except remote transmission mode. The callback function pfnCallback can be NULL, but there will be no notification of a successful transmission. This function has to be called at least once before function <a class="el" href="group___group_c_a_n___functions.html#gac2dfa65e0a9a2137f75d3ebbf257789b" title="Updates the message data of a message buffer and/or start transmission. ">Can_UpdateAndTransmitMsgBuffer()</a> can be used with the same message buffer index.</p>
<p>With the parameter stc_can_msg_id_t::pstcMsgId of type <a class="el" href="structstc__can__msg__id__t.html" title="CAN message identifier. ">stc_can_msg_id_t</a> the API can set the identifier (11 bit or 29 bit length) of the CAN transmit message. It is possible to set a callback function to get notified when a transmission is successfully finished. <a class="el" href="group___group_c_a_n___functions.html#gadd7db261d564541d858756c169f5bd71" title="Configures a message buffer for transmission. ">Can_SetTransmitMsgBuffer()</a> must be called before calling <a class="el" href="group___group_c_a_n___functions.html#gac2dfa65e0a9a2137f75d3ebbf257789b" title="Updates the message data of a message buffer and/or start transmission. ">Can_UpdateAndTransmitMsgBuffer()</a>. Update or setting of new values of function <a class="el" href="group___group_c_a_n___functions.html#gadd7db261d564541d858756c169f5bd71" title="Configures a message buffer for transmission. ">Can_SetTransmitMsgBuffer()</a> or <a class="el" href="group___group_c_a_n___functions.html#gac2dfa65e0a9a2137f75d3ebbf257789b" title="Updates the message data of a message buffer and/or start transmission. ">Can_UpdateAndTransmitMsgBuffer()</a> is not possible if a transmission is pending or ongoing, except remote transmission mode is used.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pstcCan</td><td>Pointer to register area of a CAN unit. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u8MsgBuf</td><td>Message buffer index (0 .. CAN_MESSAGE_BUFFER_COUNT - 1) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pstcMsgId</td><td>CAN message identifier. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pfnCallback</td><td>Callback function to be called after successful transmission, can be NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Ok</td><td>Message buffer has been successfully initialized. </td></tr>
    <tr><td class="paramname">ErrorInvalidParameter</td><td>If one of the following conditions are met:<ul>
<li>pstcCan == NULL</li>
<li>pstcCanInternData == NULL (invalid or disabled CAN unit (PDL_PERIPHERAL_ENABLE_CAN))</li>
<li>pstcMsgId == NULL</li>
<li>u8MsgBuf out of range </li>
</ul>
</td></tr>
    <tr><td class="paramname">ErrorOperationInProgress</td><td>If following condition is met:<ul>
<li>A transmission is pending (either wait or call <a class="el" href="group___group_c_a_n___functions.html#ga323d4f4f4b68a2eb1fa7adc0c49ae5ff" title="Stop any message buffer operation i.e. ">Can_ResetMsgBuffer()</a> ). </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gac2dfa65e0a9a2137f75d3ebbf257789b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">en_result_t Can_UpdateAndTransmitMsgBuffer </td>
          <td>(</td>
          <td class="paramtype">volatile FM_CAN_TypeDef *&#160;</td>
          <td class="paramname"><em>pstcCan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>u8MsgBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structstc__can__msg__data__t.html">stc_can_msg_data_t</a> *&#160;</td>
          <td class="paramname"><em>pstcMsgData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___group_c_a_n___types.html#ga394463884556f90fa7d01912dbedd57e">en_can_tx_mode_t</a>&#160;</td>
          <td class="paramname"><em>enTxMode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the message data of a message buffer and/or start transmission. </p>
<p>Transmits the message immediately (immediate transmission mode) or on reception of a matching remote frame (remote transmission mode). Function <a class="el" href="group___group_c_a_n___functions.html#gadd7db261d564541d858756c169f5bd71" title="Configures a message buffer for transmission. ">Can_SetTransmitMsgBuffer()</a> must be called before setup the identifier and enable this message buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pstcCan</td><td>Pointer to register area of a CAN unit. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u8MsgBuf</td><td>Message buffer index (0 .. CAN_MESSAGE_BUFFER_COUNT - 1) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pstcMsgData</td><td>CAN message data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">enTxMode</td><td>Transmission mode (immediately or remote)</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Ok</td><td>Message buffer has been successfully updated. </td></tr>
    <tr><td class="paramname">ErrorInvalidParameter</td><td>If one of the following conditions are met:<ul>
<li>pstcCan == NULL</li>
<li>pstcCanInternData == NULL (invalid or disabled CAN unit (PDl_PERIPHERAL_ENABLE_CAN))</li>
<li>pstcMsgData == NULL</li>
<li>u8MsgBuf out of range </li>
</ul>
</td></tr>
    <tr><td class="paramname">ErrorUninitialized</td><td>If <a class="el" href="group___group_c_a_n___functions.html#gadd7db261d564541d858756c169f5bd71" title="Configures a message buffer for transmission. ">Can_SetTransmitMsgBuffer()</a> was not called before. </td></tr>
    <tr><td class="paramname">ErrorOperationInProgress</td><td>If a transmission is pending (either wait or call <a class="el" href="group___group_c_a_n___functions.html#ga323d4f4f4b68a2eb1fa7adc0c49ae5ff" title="Stop any message buffer operation i.e. ">Can_ResetMsgBuffer()</a> ). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga7398532897b21d25c53be9f8e4d820f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">en_result_t Can_UpdateAndTransmitFifoMsgBuffer </td>
          <td>(</td>
          <td class="paramtype">volatile FM_CAN_TypeDef *&#160;</td>
          <td class="paramname"><em>pstcCan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>u8MsgBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structstc__can__msg__data__t.html">stc_can_msg_data_t</a> *&#160;</td>
          <td class="paramname"><em>pstcMsgData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___group_c_a_n___types.html#ga394463884556f90fa7d01912dbedd57e">en_can_tx_mode_t</a>&#160;</td>
          <td class="paramname"><em>enTxMode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the message data of a message buffer and/or start with EOB = 0 (Msg Buffer as FIFO) transmission. </p>
<p>The function calls <a class="el" href="group___group_c_a_n___functions.html#gac2dfa65e0a9a2137f75d3ebbf257789b" title="Updates the message data of a message buffer and/or start transmission. ">Can_UpdateAndTransmitMsgBuffer()</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pstcCan</td><td>Pointer to register area of a CAN unit. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u8MsgBuf</td><td>Message buffer index (0 .. CAN_MESSAGE_BUFFER_COUNT - 1) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pstcMsgData</td><td>CAN message data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">enTxMode</td><td>Transmission mode (immediately or remote)</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Ok</td><td>Message buffer has been successfully updated. </td></tr>
    <tr><td class="paramname">ErrorInvalidParameter</td><td>If one of the following conditions are met:<ul>
<li>pstcCan == NULL</li>
<li>pstcCanInternData == NULL (invalid or disabled CAN unit (PDL_PERIPHERAL_ENABLE_CAN))</li>
<li>pstcMsgData == NULL</li>
<li>u8MsgBuf out of range </li>
</ul>
</td></tr>
    <tr><td class="paramname">ErrorUninitialized</td><td>If <a class="el" href="group___group_c_a_n___functions.html#gadd7db261d564541d858756c169f5bd71" title="Configures a message buffer for transmission. ">Can_SetTransmitMsgBuffer()</a> was not called before. </td></tr>
    <tr><td class="paramname">ErrorOperationInProgress</td><td>If a transmission is pending (either wait or call <a class="el" href="group___group_c_a_n___functions.html#ga323d4f4f4b68a2eb1fa7adc0c49ae5ff" title="Stop any message buffer operation i.e. ">Can_ResetMsgBuffer()</a> ). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga0f98da3c105c7eaa3cf9c604850ff36c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">en_result_t Can_SetReceiveMsgBuffer </td>
          <td>(</td>
          <td class="paramtype">volatile FM_CAN_TypeDef *&#160;</td>
          <td class="paramname"><em>pstcCan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>u8MsgBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstc__can__msg__t.html">stc_can_msg_t</a> *&#160;</td>
          <td class="paramname"><em>pstcMsgBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>u32MsgIdMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___group_c_a_n___data_structures.html#gab7a5a581f5d63afe396a53e4fc18800e">can_rx_msg_func_ptr_t</a>&#160;</td>
          <td class="paramname"><em>pfnCallback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure a message buffer for reception. </p>
<p>Configure and enable a message buffer for reception. The acceptance filter is set by pstcMsgBuffer-&gt;stcIdentifier and u32MsgIdMask. Each '0' bit in u32MsgIdMask masks the corresponding bit of the received message ID before comparing it to the configured identifier (set by pstcMsgBuffer-&gt;stcIdentifier). This allows receiving messages with different identifier. Setting all bits of u32MsgIdMask to '1' will only accept messages that match the configured identifier. If extended identifier is used, the u32MsgIdMask will also be interpreted as extended mask identifier. If 11 bit identifier is used, than u32MsgIdMask will be used as 11 bit mask identifier. The application must provide a message buffer object (pstcMsgBuffer) to be filled with received data. After reception of a message that passed the acceptance filter, the message's identifier, data and data length is copied into the provided message buffer and its bNew flag is set to TRUE. The message buffer has to be kept valid until this message buffer is reset (<a class="el" href="group___group_c_a_n___functions.html#ga323d4f4f4b68a2eb1fa7adc0c49ae5ff" title="Stop any message buffer operation i.e. ">Can_ResetMsgBuffer()</a>).</p>
<p>A mask identifier has to be set when calling <a class="el" href="group___group_c_a_n___functions.html#ga0f98da3c105c7eaa3cf9c604850ff36c" title="Configure a message buffer for reception. ">Can_SetReceiveMsgBuffer()</a>, the length for the mask identifier will be the same like the one used in pstcMsgBuffer (11-bit or 29-bit identifier mask). The extended identification mask bit and the direction mask bit are always set to 1.</p>
<p>The API has to check the bNew flag of parameter pstcMsgBuffer to get information about if a message has already been received or not. If a new message has been received while bNew flag is set (the last received message was not read out by API so far) than the bOverflow flag will be set. So, if callback function is not used, the API has to reset the bNew flag when the received message is read out (also the bOverflow flag has to be reset) and furthermore.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pstcCan</td><td>Pointer to register area of a CAN unit. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u8MsgBuf</td><td>Message buffer index (0 .. CAN_MESSAGE_BUFFER_COUNT - 1) </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pstcMsgBuffer</td><td>CAN message object which defines identifier for acceptance filter. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u32MsgIdMask</td><td>Mask for identifier acceptance filter and later receives the received message (all '1' disables masking). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pfnCallback</td><td>Callback function which is called when new CAN message was received and accepted by this message buffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Ok</td><td>Message buffer for reception has been succesfully set. </td></tr>
    <tr><td class="paramname">ErrorInvalidParameter</td><td>If one of the following conditions are met:<ul>
<li>pstcCan == NULL</li>
<li>pstcCanInternData == NULL (invalid or disabled CAN unit (PDL_PERIPHERAL_ENABLE_CAN))</li>
<li>pstcMsgBuffer == NULL</li>
<li>u8MsgBuf out of range </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga48c8e747902799e410377d4b39915d3e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">en_result_t Can_SetReceiveFifoMsgBuffer </td>
          <td>(</td>
          <td class="paramtype">volatile FM_CAN_TypeDef *&#160;</td>
          <td class="paramname"><em>pstcCan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>u8MsgBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstc__can__msg__t.html">stc_can_msg_t</a> *&#160;</td>
          <td class="paramname"><em>pstcMsgBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>u32MsgIdMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___group_c_a_n___data_structures.html#gab7a5a581f5d63afe396a53e4fc18800e">can_rx_msg_func_ptr_t</a>&#160;</td>
          <td class="paramname"><em>pfnCallback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure a message buffer for reception with EOB = 0 (FIFO mode). </p>
<p>This function calls <a class="el" href="group___group_c_a_n___functions.html#ga0f98da3c105c7eaa3cf9c604850ff36c" title="Configure a message buffer for reception. ">Can_SetReceiveMsgBuffer()</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pstcCan</td><td>Pointer to register area of a CAN unit. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u8MsgBuf</td><td>Message buffer index (0 .. CAN_MESSAGE_BUFFER_COUNT - 1) </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pstcMsgBuffer</td><td>CAN message object which defines identifier for acceptance filter. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u32MsgIdMask</td><td>Mask for identifier acceptance filter and later receives the received message (all '1' disables masking). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pfnCallback</td><td>Callback function which is called when new CAN message was received and accepted by this message buffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Ok</td><td>Message buffer for reception has been succesfully set. </td></tr>
    <tr><td class="paramname">ErrorInvalidParameter</td><td>If one of the following conditions are met:<ul>
<li>pstcCan == NULL</li>
<li>pstcCanInternData == NULL (invalid or disabled CAN unit (PDL_PERIPHERAL_ENABLE_CAN))</li>
<li>pstcMsgBuffer == NULL</li>
<li>u8MsgBuf out of range </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga323d4f4f4b68a2eb1fa7adc0c49ae5ff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">en_result_t Can_ResetMsgBuffer </td>
          <td>(</td>
          <td class="paramtype">volatile FM_CAN_TypeDef *&#160;</td>
          <td class="paramname"><em>pstcCan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>u8MsgBuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop any message buffer operation i.e. </p>
<p>disable it</p>
<ul>
<li>stop pending transmission (reset TXRQST and NEWDAT flag):</li>
<li>stop reception operation (reset MSGVAL flag)</li>
<li>reset RXIE and TXIE</li>
<li>clear pointers to external buffers and callback functions</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pstcCan</td><td>Pointer to register area of a CAN unit. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u8MsgBuf</td><td>Message buffer index (0 .. CAN_MESSAGE_BUFFER_COUNT - 1)</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Ok</td><td>Message buffer operations have been stoped </td></tr>
    <tr><td class="paramname">ErrorInvalidParameter</td><td>If one of the following conditions are met:<ul>
<li>pstcCan == NULL</li>
<li>pstcCanInternData == NULL (invalid or disabled CAN unit (PDL_PERIPHERAL_ENABLE_CAN))</li>
<li>u8MsgBuf out of range </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>Cypress Peripheral Driver Library</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
